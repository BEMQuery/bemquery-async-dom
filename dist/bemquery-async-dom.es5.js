/*! bemquery-async-dom v0.1.5 | (c) 2016-2017 BEMQuery team | MIT license (see LICENSE) */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("bemquery-core")):"function"==typeof define&&define.amd?define(["bemquery-core"],e):e(t.bemquery)}(this,function(t){"use strict";function e(t,e){var r=[];return[].forEach.call(e.classList,function(e){var n=t.getStateFromClass(String(e));n&&r.push(n)}),r}var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(){function t(){r(this,t),this.read=[],this.write=[]}return n(t,[{key:"add",value:function(t,e){if("read"!==t&&"write"!==t)throw new TypeError("Type must be either 'read' or 'write'.");if("function"!=typeof e)throw new TypeError("Task must be a function.");this[t].push(e)}},{key:"run",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"read";if("read"!==e&&"write"!==e)throw new TypeError("Type must be either 'read' or 'write'.");return new Promise(function(r){requestAnimationFrame(function(){var n=[];return t[e].forEach(function(t){n.push(t())}),t[e]=[],r(n)})})}}]),t}();t.BEMQuery.prototype.read=function(){return this.batch||(this.batch=new i),this.batch.run("read")},t.BEMQuery.prototype.write=function(){return this.batch||(this.batch=new i),this.batch.run("write")},t.BEMQuery.prototype.html=function(t){var e=this;return this.batch||(this.batch=new i),"undefined"!=typeof t?(t=String(t),this.batch.add("write",function(){var r=e.elements;r.forEach(function(e){e.innerHTML=t})})):this.batch.add("read",function(){var t=e.elements,r=[];return t.forEach(function(t){r.push(t.innerHTML)}),r}),this},t.BEMQuery.prototype.getStates=function(){var t=this;this.batch||(this.batch=new i);var r=this.elements;return this.batch.add("read",function(){var n=[];return r.forEach(function(r){n.push(e(t.converter,r))}),n}),this}});
//# sourceMappingURL=bemquery-async-dom.es5.js.map
